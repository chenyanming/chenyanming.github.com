<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-09-05 Sat 15:58 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>The ultimate hacking of Emacs in windows</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.cacheClassElem = elem.className;
         elem.cacheClassTarget = target.className;
         target.className = "code-highlighted";
         elem.className   = "code-highlighted";
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(elem.cacheClassElem)
         elem.className = elem.cacheClassElem;
       if(elem.cacheClassTarget)
         target.className = elem.cacheClassTarget;
     }
    /*]]>*///-->
// @license-end
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">The ultimate hacking of Emacs in windows</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org8e26bfe">1. What is WSL?</a>
<ul>
<li><a href="#orgfbc53b1">1.1. Advantages</a></li>
<li><a href="#org9673ba8">1.2. Disadvantages</a></li>
</ul>
</li>
<li><a href="#org336e042">2. Comparison between msys2 &amp; WSL2?</a></li>
<li><a href="#orgdc64dd8">3. Windows Configuration</a>
<ul>
<li><a href="#org30b73f8">3.1. swap ctrl and caps</a></li>
<li><a href="#org8a83038">3.2. UTF8</a></li>
</ul>
</li>
<li><a href="#org49c9851">4. WSL2</a>
<ul>
<li><a href="#org69d7f68">4.1. Install and enable WSL2</a>
<ul>
<li><a href="#orgda23b7e">4.1.1. References</a></li>
</ul>
</li>
<li><a href="#org97fa536">4.2. Windows Terminal</a>
<ul>
<li><a href="#org89581c6">4.2.1. <span class="todo TODO">TODO</span> THEMES</a></li>
<li><a href="#org0c83457">4.2.2. References</a></li>
</ul>
</li>
<li><a href="#org12b34a7">4.3. zsh</a></li>
<li><a href="#org63d2201">4.4. Fonts</a></li>
<li><a href="#orgc2aa862">4.5. OneDrive</a></li>
<li><a href="#orgbb55160">4.6. X11 Server (VcXSrv)</a>
<ul>
<li><a href="#orgf3c4e6a">4.6.1. HiDPI</a></li>
<li><a href="#orgdd74bef">4.6.2. Bigger Cursor</a></li>
<li><a href="#org1d9655e">4.6.3. The first loading time is too long</a></li>
<li><a href="#org54f7f6a">4.6.4. References</a></li>
</ul>
</li>
<li><a href="#org41e5401">4.7. Setup Emacs</a>
<ul>
<li><a href="#org141efdc">4.7.1. install dependencies</a></li>
<li><a href="#org0a5cdbb">4.7.2. Download and install</a></li>
<li><a href="#orgfef3a31">4.7.3. Install doom</a></li>
</ul>
</li>
<li><a href="#org64d313e">4.8. Setup Python Development Environment</a>
<ul>
<li><a href="#org7a7b963">4.8.1. pyenv</a></li>
<li><a href="#orgbbab681">4.8.2. mypyls</a></li>
</ul>
</li>
<li><a href="#org113d435">4.9. Setup Node.js Development Environment</a>
<ul>
<li><a href="#org31de10a">4.9.1. node</a></li>
</ul>
</li>
<li><a href="#org29c6e05">4.10. Setup Rust Development Environment</a></li>
<li><a href="#orga034f72">4.11. Install other useful packages</a>
<ul>
<li><a href="#org286e5f2">4.11.1. pdf-tools</a></li>
<li><a href="#orgbd9b809">4.11.2. rga</a></li>
<li><a href="#org436884b">4.11.3. Rime</a></li>
<li><a href="#org2bdf254">4.11.4. sdcv</a></li>
<li><a href="#org1190bd2">4.11.5. telega</a></li>
</ul>
</li>
<li><a href="#org0781309">4.12. WSL<sub>INTEROP</sub> issue</a>
<ul>
<li><a href="#orgbfbfd04">4.12.1. References</a></li>
</ul>
</li>
<li><a href="#orge3e8427">4.13. An .zshrc example</a></li>
<li><a href="#org9ec2ab8">4.14. Export WSL (Backup)</a></li>
<li><a href="#org6e40099">4.15. <span class="todo TODO">TODO</span> ICONS in terminal</a></li>
</ul>
</li>
<li><a href="#orgb1971d1">5. Msys2</a>
<ul>
<li><a href="#orgf254fcf">5.1. pacman</a></li>
<li><a href="#org5eb6ba4">5.2. choco</a></li>
<li><a href="#orgd4aef14">5.3. Rime</a></li>
<li><a href="#org2e9b473">5.4. emacs</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
I am a macOS users for many years, for the most convenient way to install various Linux tools, until the birth of WSL2.
</p>

<div id="outline-container-org8e26bfe" class="outline-2">
<h2 id="org8e26bfe"><span class="section-number-2">1</span> What is WSL?</h2>
<div class="outline-text-2" id="text-1">
<p>
Earlier on August 2, 2016, Microsoft released Windows Subsystem for Linux (WSL), enabling the native way to run Linux Tools in Windows 10 and Windows Server 2019.
</p>

<p>
In May 2019, WSL2 was introduced, by importing the Real Linux Kernel through Hyper-V features (in a Virtual Machine Environment), providing the users with the full &amp; immerse way to work with Linux under windows, with 20 times the read/write performances of WSL 1.
</p>

<p>
For Windows Emacs Users, here are some advantages/disadvantages for you to consider before switching the WSL2:
</p>
</div>

<div id="outline-container-orgfbc53b1" class="outline-3">
<h3 id="orgfbc53b1"><span class="section-number-3">1.1</span> Advantages</h3>
<div class="outline-text-3" id="text-1-1">
<ol class="org-ol">
<li>The performance of <a href="https://github.com/magit/magit">Magit</a> is way faster than the GNU compiled original windows <a href="https://ftp.gnu.org/gnu/emacs/windows/emacs-27/">Emacs-27</a> binaries.</li>
<li>The Font Rederring is better.</li>
<li>No flickering.</li>
<li><a href="https://docs.microsoft.com/en-us/windows/wsl/interop">interoperability</a> between Windows and Linux.</li>
<li>Native OneDrive support.</li>
</ol>
</div>
</div>

<div id="outline-container-org9673ba8" class="outline-3">
<h3 id="org9673ba8"><span class="section-number-3">1.2</span> Disadvantages</h3>
<div class="outline-text-3" id="text-1-2">
<ol class="org-ol">
<li>The network configuration is a pain, workaround is available.
<a href="https://github.com/microsoft/WSL/issues/5336">https://github.com/microsoft/WSL/issues/5336</a></li>
<li>X11 may lost connection when network changes.</li>
</ol>

<p>
<a href="https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux">https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux</a>
<a href="https://docs.microsoft.com/en-us/windows/wsl/wsl2-index">https://docs.microsoft.com/en-us/windows/wsl/wsl2-index</a>
<a href="https://docs.microsoft.com/en-us/windows/wsl/compare-versions">https://docs.microsoft.com/en-us/windows/wsl/compare-versions</a>
</p>
</div>
</div>
</div>

<div id="outline-container-org336e042" class="outline-2">
<h2 id="org336e042"><span class="section-number-2">2</span> Comparison between msys2 &amp; WSL2?</h2>
<div class="outline-text-2" id="text-2">
<p>
<a href="https://docs.microsoft.com/en-us/windows/wsl/compare-versions">https://docs.microsoft.com/en-us/windows/wsl/compare-versions</a>
</p>
</div>
</div>


<div id="outline-container-orgdc64dd8" class="outline-2">
<h2 id="orgdc64dd8"><span class="section-number-2">3</span> Windows Configuration</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org30b73f8" class="outline-3">
<h3 id="org30b73f8"><span class="section-number-3">3.1</span> swap ctrl and caps</h3>
<div class="outline-text-3" id="text-3-1">
<p>
<a href="https://www.mavjs.org/post/swap-ctrl-and-capslock-on-windows/">https://www.mavjs.org/post/swap-ctrl-and-capslock-on-windows/</a>
</p>
</div>
</div>

<div id="outline-container-org8a83038" class="outline-3">
<h3 id="org8a83038"><span class="section-number-3">3.2</span> UTF8</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Need to enable beta utf8 in region setting
</p>
</div>
</div>
</div>

<div id="outline-container-org49c9851" class="outline-2">
<h2 id="org49c9851"><span class="section-number-2">4</span> WSL2</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org69d7f68" class="outline-3">
<h3 id="org69d7f68"><span class="section-number-3">4.1</span> Install and enable WSL2</h3>
<div class="outline-text-3" id="text-4-1">
<ol class="org-ol">
<li>Important Update to lastest windows 10.</li>

<li>Install WSL</li>
</ol>
<div class="org-src-container">
<pre class="src src-sh">Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
</pre>
</div>

<ol class="org-ol">
<li>Enable WSL2</li>
</ol>
<div class="org-src-container">
<pre class="src src-sh">dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
</pre>
</div>

<ol class="org-ol">
<li>Check WSL version</li>
</ol>
<div class="org-src-container">
<pre class="src src-sh">wsl -l -v
</pre>
</div>

<p>
There are many people who may be not able to run the above commands, just make sure you have updated to lastest windows.
<a href="https://devblogs.microsoft.com/commandline/wsl-2-support-is-coming-to-windows-10-versions-1903-and-1909/">https://devblogs.microsoft.com/commandline/wsl-2-support-is-coming-to-windows-10-versions-1903-and-1909/</a>
</p>

<ol class="org-ol">
<li>Set default WSL version to 2</li>
</ol>
<div class="org-src-container">
<pre class="src src-sh">wsl.exe --set-default-version <span style="color: #97365B; font-weight: bold;">2</span>
</pre>
</div>
<p>
All later WSL Distros are installed as WSL2. No worries, you can switch between WSL1 and WSL2 with just one command without pain, just do it~
</p>

<ol class="org-ol">
<li>Install ubuntu 18.04 in windows store</li>
</ol>

<p>
Optional: Convert WSL1 to WSL2
If you already installed some Distros before but they are in WSL1, no worries, it is very easy to switch from WSL1 to WSL2:
</p>

<div class="org-src-container">
<pre class="src src-sh">wsl.exe --set-version Ubuntu-18.04 <span style="color: #97365B; font-weight: bold;">2</span>
</pre>
</div>
</div>

<div id="outline-container-orgda23b7e" class="outline-4">
<h4 id="orgda23b7e"><span class="section-number-4">4.1.1</span> References</h4>
<div class="outline-text-4" id="text-4-1-1">
<ul class="org-ul">
<li><a href="https://devblogs.microsoft.com/commandline/wsl-2-support-is-coming-to-windows-10-versions-1903-and-1909/">WSL 2 Support is coming to Windows 10 Versions 1903 and 1909 | Windows Comman&#x2026;</a></li>
<li><a href="https://ubuntu.com/blog/ubuntu-on-wsl-2-is-generally-available">Ubuntu on WSL 2 Is Generally Available | Ubuntu</a></li>
</ul>
</div>
</div>
</div>


<div id="outline-container-org97fa536" class="outline-3">
<h3 id="org97fa536"><span class="section-number-3">4.2</span> Windows Terminal</h3>
<div class="outline-text-3" id="text-4-2">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #4F894C;">"defaults"</span>:
<span style="color: #3B6EA8;">{</span>
    // Put settings here that you want to apply to all profiles.
    <span style="color: #4F894C;">"cursorShape"</span>: <span style="color: #4F894C;">"filledBox"</span> ,
    <span style="color: #4F894C;">"fontFace"</span>: <span style="color: #4F894C;">"JetBrains Mono"</span>
<span style="color: #3B6EA8;">}</span>,


...

<span style="color: #4F894C;">"startingDirectory"</span>: <span style="color: #4F894C;">"//wsl$/Ubuntu-20.04/home/damonchan"</span>
</pre>
</div>
</div>

<div id="outline-container-org89581c6" class="outline-4">
<h4 id="org89581c6"><span class="section-number-4">4.2.1</span> <span class="todo TODO">TODO</span> THEMES</h4>
</div>

<div id="outline-container-org0c83457" class="outline-4">
<h4 id="org0c83457"><span class="section-number-4">4.2.2</span> References</h4>
<div class="outline-text-4" id="text-4-2-2">
<ul class="org-ul">
<li><a href="https://github.com/microsoft/terminal/issues/1379">https://github.com/microsoft/terminal/issues/1379</a></li>
<li><a href="https://github.com/microsoft/terminal">https://github.com/microsoft/terminal</a></li>
<li><a href="https://docs.microsoft.com/en-us/windows/terminal/customize-settings/profile-settings">https://docs.microsoft.com/en-us/windows/terminal/customize-settings/profile-settings</a></li>
</ul>

<div class="figure">
<p><img src="windows-setup/UnblinkCursor.PNG" alt="UnblinkCursor.PNG" />
</p>
</div>
</div>
</div>
</div>


<div id="outline-container-org12b34a7" class="outline-3">
<h3 id="org12b34a7"><span class="section-number-3">4.3</span> zsh</h3>
<div class="outline-text-3" id="text-4-3">
<p>
I like to use zsh which provide a better interface for bash.
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">sudo</span> apt install zsh
chsh -s $<span style="color: #3B6EA8;">(</span><span style="color: #29838D;">which</span> zsh<span style="color: #3B6EA8;">)</span>
sh -c <span style="color: #4F894C;">"</span><span style="color: #3B6EA8; font-weight: bold;">$(</span><span style="color: #3B6EA8; font-weight: bold;">curl</span><span style="color: #3B6EA8; font-weight: bold;"> -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span><span style="color: #4F894C;">"</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org63d2201" class="outline-3">
<h3 id="org63d2201"><span class="section-number-3">4.4</span> Fonts</h3>
<div class="outline-text-3" id="text-4-4">
<p>
Just Create a soft link from Windows Font to Ubuntu:
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">ln</span> -s /mnt/c/Windows/Fonts ~/.fonts
fc-cache -fv
</pre>
</div>

<p>
PS: The first time to startup emacs will setup fonts as well.
</p>
</div>
</div>


<div id="outline-container-orgc2aa862" class="outline-3">
<h3 id="orgc2aa862"><span class="section-number-3">4.5</span> OneDrive</h3>
<div class="outline-text-3" id="text-4-5">
<p>
Just Link Windows OneDrive Root Directory to Ubuntu:
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">ln</span> -s /mnt/c/Users/elecm/OneDrive ~/OneDrive
</pre>
</div>
</div>
</div>


<div id="outline-container-orgbb55160" class="outline-3">
<h3 id="orgbb55160"><span class="section-number-3">4.6</span> X11 Server (VcXSrv)</h3>
<div class="outline-text-3" id="text-4-6">
<p>
Using /etc/resolv.conf nameserver won&rsquo;t work for me since I disabled resolv.conf generation in /etc/wsl.conf (I have a custom resolv.conf).
</p>

<p>
Ultimately you want the WSL2 host IP address, which should also be your default route. Here&rsquo;s my ~/.bashrc entry for my Debian WSL2 distro:
</p>

<p>
➜  ~ cat /etc/resolv.conf
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">[network]</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">generateResolvConf = false</span>
nameserver 8.8.8.8
nameserver 8.8.4.4
</pre>
</div>

<p>
➜  cat ~/.zshrc
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #29838D;">export</span> <span style="color: #842879;">DISPLAY</span>=$<span style="color: #3B6EA8;">(</span>ip route | awk <span style="color: #4F894C;">'{print $3; exit}'</span><span style="color: #3B6EA8;">)</span>:0
<span style="color: #29838D;">export</span> <span style="color: #842879;">LIBGL_ALWAYS_INDIRECT</span>=<span style="color: #97365B; font-weight: bold;">1</span>
</pre>
</div>

<p>
➜  ~ cat /etc/wsl.conf
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #3B6EA8;">[</span>network<span style="color: #3B6EA8;">]</span>
<span style="color: #842879;">generateResolvConf</span> = false
</pre>
</div>

<p>
Allow both private and public network.
</p>
</div>

<div id="outline-container-orgf3c4e6a" class="outline-4">
<h4 id="orgf3c4e6a"><span class="section-number-4">4.6.1</span> HiDPI</h4>
<div class="outline-text-4" id="text-4-6-1">
<p>
Add to .zshrc
export GDK<sub>SCALE</sub>=2
</p>
</div>
</div>

<div id="outline-container-orgdd74bef" class="outline-4">
<h4 id="orgdd74bef"><span class="section-number-4">4.6.2</span> Bigger Cursor</h4>
<div class="outline-text-4" id="text-4-6-2">
<p>
The following works, though might not be the best solution. Install package big-cursor
</p>

<p>
sudo apt-get install big-cursor
</p>

<p>
Then go to the directory you installed VcXsrv in, to the directory fonts/misc (e.g C:\Program Files\VcXsrv\fonts\misc), rename the file cursor.pcf.gz to cursor-small.pcf.gz, and then copy, from the linux system, /usr/share/fonts/X11/misc/big-cursor.pcf.gz to cursor.pcf.gz in the fonts/misc directory on the Windows side (where VcXsrv resides)j[&lt;0;61;23M]
</p>

<p>
I&rsquo;m sure there is a more elegant way to do this, but on my machine it works.
</p>
</div>
</div>


<div id="outline-container-org1d9655e" class="outline-4">
<h4 id="org1d9655e"><span class="section-number-4">4.6.3</span> The first loading time is too long</h4>
<div class="outline-text-4" id="text-4-6-3">
<p>
Connected, but loading a long time still can not show the x11 windows.
</p>

<p>
Probably it is the x11 startup issue. Since after the first program loads, the next following program starts very fast.
</p>

<p>
The worst case is use terminal version&rsquo;s Emacs. It is fastest and no issues at all.
</p>

<p>
In addition to that, there is some guys use socat to build the network forwarding, but it is slow than the original x11 setting.
</p>
</div>
</div>

<div id="outline-container-org54f7f6a" class="outline-4">
<h4 id="org54f7f6a"><span class="section-number-4">4.6.4</span> References</h4>
<div class="outline-text-4" id="text-4-6-4">
<p>
<a href="https://stackoverflow.com/questions/61110603/how-to-set-up-working-x11-forwarding-on-wsl2">https://stackoverflow.com/questions/61110603/how-to-set-up-working-x11-forwarding-on-wsl2</a>
<a href="https://superuser.com/questions/1196399/how-do-i-set-the-size-of-the-x-mouse-pointer-in-the-windows-subsystem-for-linux">https://superuser.com/questions/1196399/how-do-i-set-the-size-of-the-x-mouse-pointer-in-the-windows-subsystem-for-linux</a>
</p>
</div>
</div>
</div>


<div id="outline-container-org41e5401" class="outline-3">
<h3 id="org41e5401"><span class="section-number-3">4.7</span> Setup Emacs</h3>
<div class="outline-text-3" id="text-4-7">
<p>
Let&rsquo;s dive into the meat of Compiling and installing the lastest Emacs 27.1!
</p>
</div>
<div id="outline-container-org141efdc" class="outline-4">
<h4 id="org141efdc"><span class="section-number-4">4.7.1</span> install dependencies</h4>
<div class="outline-text-4" id="text-4-7-1">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">sudo</span> apt install -y autoconf automake autotools-dev bsd-mailx build-essential <span style="color: #4F894C;">\</span>
    diffstat gnutls-dev imagemagick libasound2-dev libc6-dev libdatrie-dev <span style="color: #4F894C;">\</span>
    libdbus-1-dev libgconf2-dev libgif-dev libgnutls28-dev libgpm-dev libgtk2.0-dev <span style="color: #4F894C;">\</span>
    libgtk-3-dev libice-dev libjpeg-dev liblockfile-dev liblqr-1-0 libm17n-dev <span style="color: #4F894C;">\</span>
    libmagickwand-dev libncurses5-dev libncurses-dev libotf-dev libpng-dev <span style="color: #4F894C;">\</span>
    librsvg2-dev libsm-dev libthai-dev libtiff5-dev libtiff-dev libtinfo-dev libtool <span style="color: #4F894C;">\</span>
    libx11-dev libxext-dev libxi-dev libxml2-dev libxmu-dev libxmuu-dev libxpm-dev <span style="color: #4F894C;">\</span>
    libxrandr-dev libxt-dev libxtst-dev libxv-dev quilt sharutils texinfo xaw3dg <span style="color: #4F894C;">\</span>
    xaw3dg-dev xorg-dev xutils-dev zlib1g-dev libjansson-dev libxaw7-dev <span style="color: #4F894C;">\</span>
    libselinux1-dev libmagick++-dev libacl1-dev gir1.2-javascriptcoregtk-4.0 <span style="color: #4F894C;">\</span>
    gir1.2-webkit2-4.0 libenchant1c2a libglvnd-core-dev libicu-le-hb-dev <span style="color: #4F894C;">\</span>
    libidn2-0-dev libjavascriptcoregtk-4.0-dev liboss4-salsa2 libsoup2.4-dev <span style="color: #4F894C;">\</span>
    libsystemd-dev libwebkit2gtk-4.0-dev libx11-xcb-dev libxcb-dri2-0-dev <span style="color: #4F894C;">\</span>
    libxcb-dri3-dev libxcb-glx0-dev libxcb-present-dev libxshmfence-dev <span style="color: #4F894C;">\</span>
    x11proto-composite-dev x11proto-core-dev x11proto-damage-dev <span style="color: #4F894C;">\</span>
    x11proto-fixes-dev
</pre>
</div>
</div>
</div>

<div id="outline-container-org0a5cdbb" class="outline-4">
<h4 id="org0a5cdbb"><span class="section-number-4">4.7.2</span> Download and install</h4>
<div class="outline-text-4" id="text-4-7-2">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">cd</span> ~
wget https://ftp.gnu.org/pub/gnu/emacs/emacs-27.1.tar.gz
tar -xzvf emacs-27.1.tar.gz
<span style="color: #9A7500;">cd</span> emacs-27.1
./configure
<span style="color: #9A7500;">make</span>
<span style="color: #9A7500;">sudo</span> <span style="color: #9A7500;">make</span> install
<span style="color: #9A7500;">rm</span> ~/emacs-27.1.tar.gz
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfef3a31" class="outline-4">
<h4 id="orgfef3a31"><span class="section-number-4">4.7.3</span> Install doom</h4>
<div class="outline-text-4" id="text-4-7-3">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">git</span> clone --depth <span style="color: #97365B; font-weight: bold;">1</span> https://github.com/hlissner/doom-emacs ~/.emacs.d
~/.emacs.d/bin/doom install
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-org64d313e" class="outline-3">
<h3 id="org64d313e"><span class="section-number-3">4.8</span> Setup Python Development Environment</h3>
<div class="outline-text-3" id="text-4-8">
</div>
<div id="outline-container-org7a7b963" class="outline-4">
<h4 id="org7a7b963"><span class="section-number-4">4.8.1</span> pyenv</h4>
<div class="outline-text-4" id="text-4-8-1">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">sudo</span> apt-get install <span style="color: #9A7500;">git</span> gcc <span style="color: #9A7500;">make</span> openssl libssl-dev libbz2-dev libreadline-dev libsqlite3-dev libffi-dev
<span style="color: #9A7500;">git</span> clone https://github.com/pyenv/pyenv.git ~/.pyenv
<span style="color: #9A7500;">echo</span> <span style="color: #4F894C;">'export PYENV_ROOT="$HOME/.pyenv"'</span> &gt;&gt; ~/.zshrc
<span style="color: #9A7500;">echo</span> <span style="color: #4F894C;">'export PATH="$PYENV_ROOT/bin:$PATH"'</span> &gt;&gt; ~/.zshrc
<span style="color: #9A7500;">echo</span> -e <span style="color: #4F894C;">'if command -v pyenv 1&gt;/dev/null 2&gt;&amp;1; then\n  eval "$(pyenv init -)"\nfi'</span> &gt;&gt; ~/.zshrc
pyenv install 3.7.9
pyenv global 3.7.9
</pre>
</div>
</div>

<ol class="org-ol">
<li><a id="orge3a31a4"></a>References<br />
<div class="outline-text-5" id="text-4-8-1-1">
<p>
<a href="https://github.com/hubisan/emacs-wsl">https://github.com/hubisan/emacs-wsl</a>
<a href="https://stackoverflow.com/questions/27022373/python3-importerror-no-module-named-ctypes-when-using-value-from-module-mul">https://stackoverflow.com/questions/27022373/python3-importerror-no-module-named-ctypes-when-using-value-from-module-mul</a>
</p>
</div>
</li>
</ol>
</div>
<div id="outline-container-orgbbab681" class="outline-4">
<h4 id="orgbbab681"><span class="section-number-4">4.8.2</span> mypyls</h4>
<div class="outline-text-4" id="text-4-8-2">
<p>
<b>mspyls</b> can be installed by typing <code>M-x lsp-install-server RET mspyls</code>.
</p>
</div>
</div>
</div>


<div id="outline-container-org113d435" class="outline-3">
<h3 id="org113d435"><span class="section-number-3">4.9</span> Setup Node.js Development Environment</h3>
<div class="outline-text-3" id="text-4-9">
</div>
<div id="outline-container-org31de10a" class="outline-4">
<h4 id="org31de10a"><span class="section-number-4">4.9.1</span> node</h4>
<div class="outline-text-4" id="text-4-9-1">
<p>
Install nvm
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">curl</span> -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh | bash
</pre>
</div>

<p>
Add to .zshrc
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #29838D;">export</span> <span style="color: #842879;">NVM_DIR</span>=<span style="color: #4F894C;">"</span><span style="color: #97365B;">$</span><span style="color: #842879;">HOME</span><span style="color: #4F894C;">/.nvm"</span>
<span style="color: #3B6EA8;">[</span> -s <span style="color: #4F894C;">"</span><span style="color: #97365B;">$</span><span style="color: #842879;">NVM_DIR</span><span style="color: #4F894C;">/nvm.sh"</span> <span style="color: #3B6EA8;">]</span> &amp;&amp; <span style="color: #4F894C;">\.</span> <span style="color: #4F894C;">"</span><span style="color: #97365B;">$</span><span style="color: #842879;">NVM_DIR</span><span style="color: #4F894C;">/nvm.sh"</span>  <span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">This loads nvm</span>
<span style="color: #3B6EA8;">[</span> -s <span style="color: #4F894C;">"</span><span style="color: #97365B;">$</span><span style="color: #842879;">NVM_DIR</span><span style="color: #4F894C;">/bash_completion"</span> <span style="color: #3B6EA8;">]</span> &amp;&amp; <span style="color: #4F894C;">\.</span> <span style="color: #4F894C;">"</span><span style="color: #97365B;">$</span><span style="color: #842879;">NVM_DIR</span><span style="color: #4F894C;">/bash_completion"</span>  <span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">This loads nvm bash_completion</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sh">nvm install --lts
nvm use --lts
npm i -g javascript-typescript-langserver
.emacs.d/bin/doom sync
</pre>
</div>
<p>
<a href="https://docs.microsoft.com/en-us/windows/nodejs/setup-on-wsl2">https://docs.microsoft.com/en-us/windows/nodejs/setup-on-wsl2</a>
</p>
</div>
</div>
</div>


<div id="outline-container-org29c6e05" class="outline-3">
<h3 id="org29c6e05"><span class="section-number-3">4.10</span> Setup Rust Development Environment</h3>
<div class="outline-text-3" id="text-4-10">
<div class="org-src-container">
<pre class="src src-sh">rustup component add rust-src
<span style="color: #9A7500;">sudo</span> <span style="color: #9A7500;">curl</span> -L https://github.com/rust-analyzer/rust-analyzer/releases/latest/download/rust-analyzer-linux -o /usr/bin/rust-analyzer
<span style="color: #9A7500;">sudo</span> <span style="color: #9A7500;">chmod</span> +x /usr/bin/rust-analyzer
cargo install cargo-check
rustup component add clippy-preview
</pre>
</div>
</div>
</div>


<div id="outline-container-orga034f72" class="outline-3">
<h3 id="orga034f72"><span class="section-number-3">4.11</span> Install other useful packages</h3>
<div class="outline-text-3" id="text-4-11">
<p>
With apt, you can install any supported Linux packages that you like:
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">sudo</span> apt install calibre sqlite3 pandoc
</pre>
</div>
</div>
<div id="outline-container-org286e5f2" class="outline-4">
<h4 id="org286e5f2"><span class="section-number-4">4.11.1</span> pdf-tools</h4>
<div class="outline-text-4" id="text-4-11-1">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">sudo</span> apt install libpng-dev zlib1g-dev libpoppler-glib-dev libpoppler-private-dev
M-x pdf-tools-install
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbd9b809" class="outline-4">
<h4 id="orgbd9b809"><span class="section-number-4">4.11.2</span> rga</h4>
<div class="outline-text-4" id="text-4-11-2">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">sudo</span> apt install build-essential pandoc poppler-utils ffmpeg
wget https://github.com/phiresky/ripgrep-all/releases/download/v0.9.6/ripgrep_all-v0.9.6-x86_64-unknown-linux-musl.tar.gz
tar -zxvf ripgrep_all-v0.9.6-x86_64-unknown-linux-musl.tar.gz
<span style="color: #9A7500;">cd</span> ripgrep_all-v0.9.6-x86_64-unknown-linux-musl
<span style="color: #9A7500;">sudo</span> <span style="color: #9A7500;">cp</span> rga /usr/bin
<span style="color: #9A7500;">sudo</span> <span style="color: #9A7500;">cp</span> rga-preproc /usr/bin
</pre>
</div>
</div>
</div>

<div id="outline-container-org436884b" class="outline-4">
<h4 id="org436884b"><span class="section-number-4">4.11.3</span> Rime</h4>
<div class="outline-text-4" id="text-4-11-3">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">sudo</span> apt install <span style="color: #9A7500;">git</span> build-essential cmake libboost-all-dev libgoogle-glog-dev libleveldb-dev libmarisa-dev libopencc-dev libyaml-cpp-dev libgtest-dev
<span style="color: #9A7500;">cd</span> /usr/src/gtest
<span style="color: #9A7500;">sudo</span> cmake CMakeLists.txt
<span style="color: #9A7500;">sudo</span> <span style="color: #9A7500;">make</span>
<span style="color: #8b94a5;">#</span><span style="color: #8b94a5;">copy or symlink libgtest.a and libgtest_main.a to your /usr/lib folder</span>
<span style="color: #9A7500;">sudo</span> <span style="color: #9A7500;">cp</span> *.a /usr/lib
<span style="color: #9A7500;">cd</span> ~/.emacs.d/librime
<span style="color: #9A7500;">make</span>
<span style="color: #9A7500;">sudo</span> <span style="color: #9A7500;">make</span> install
<span style="color: #9A7500;">sudo</span> apt-get install ibus-rime <span style="color: #3B6EA8;">(</span>Need to install rime input method<span style="color: #3B6EA8;">)</span>
M-x rime-compile-module
</pre>
</div>

<p>
PS: The first time to load rime need some times, pay attention.
</p>

<p>
Sharing rime folder between windows and WSL may have issues. Better to divide them.
</p>
</div>

<ol class="org-ol">
<li><a id="orgd7f6085"></a>rime-config<br />
<div class="outline-text-5" id="text-4-11-3-1">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">git</span> clone <span style="color: #9A7500;">git</span>@github.com:chenyanming/rime-config.git ~/.config/ibus/rime
</pre>
</div>
</div>
</li>
<li><a id="org2fc3980"></a>plum<br />
<div class="outline-text-5" id="text-4-11-3-2">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">curl</span> -fsSL https://git.io/rime-install | bash
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">rime_dir="$HOME/.rime" bash rime-install</span>
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org2bdf254" class="outline-4">
<h4 id="org2bdf254"><span class="section-number-4">4.11.4</span> sdcv</h4>
<div class="outline-text-4" id="text-4-11-4">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">sudo</span> apt install stardict sdcv
</pre>
</div>
</div>
</div>
<div id="outline-container-org1190bd2" class="outline-4">
<h4 id="org1190bd2"><span class="section-number-4">4.11.5</span> telega</h4>
<div class="outline-text-4" id="text-4-11-5">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">sudo</span> apt install gperf
<span style="color: #9A7500;">git</span> clone https://github.com/tdlib/td.git
<span style="color: #9A7500;">cd</span> td
<span style="color: #9A7500;">mkdir</span> build &amp;&amp; <span style="color: #9A7500;">cd</span> build &amp;&amp; cmake ../
<span style="color: #9A7500;">make</span>
<span style="color: #9A7500;">sudo</span> <span style="color: #9A7500;">make</span> install
<span style="color: #9A7500;">git</span> clone https://github.com/zevlg/telega.el
<span style="color: #9A7500;">cd</span> telega.el
<span style="color: #9A7500;">make</span> &amp;&amp; <span style="color: #9A7500;">make</span> install
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-org0781309" class="outline-3">
<h3 id="org0781309"><span class="section-number-3">4.12</span> WSL<sub>INTEROP</sub> issue</h3>
<div class="outline-text-3" id="text-4-12">
<p>
Add the following to <code>.zshrc</code>
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">fix interop</span>
<span style="color: #29838D;">fix_wsl2_interop</span><span style="color: #3B6EA8;">()</span> <span style="color: #3B6EA8;">{</span>
    <span style="color: #3B6EA8;">for</span> i<span style="color: #3B6EA8;"> in</span> $<span style="color: #97365B;">(</span>pstree -np -s $<span style="color: #842879;">$</span> | <span style="color: #9A7500;">grep</span> -o -E <span style="color: #4F894C;">'[0-9]+'</span><span style="color: #97365B;">)</span>; <span style="color: #3B6EA8;">do</span>
        <span style="color: #3B6EA8;">if</span> <span style="color: #97365B;">[</span><span style="color: #4F894C;">[</span> -e <span style="color: #4F894C;">"/run/WSL/</span><span style="color: #97365B;">$</span><span style="color: #842879;">{i}</span><span style="color: #4F894C;">_interop"</span> <span style="color: #4F894C;">]</span><span style="color: #97365B;">]</span>; <span style="color: #3B6EA8;">then</span>
            <span style="color: #29838D;">export</span> <span style="color: #842879;">WSL_INTEROP</span>=/run/WSL/$<span style="color: #97365B;">{</span><span style="color: #842879;">i</span><span style="color: #97365B;">}</span>_interop
        <span style="color: #3B6EA8;">fi</span>
    <span style="color: #3B6EA8;">done</span>
<span style="color: #3B6EA8;">}</span>
~/.emacs.d/bin/doom env &gt; /dev/null <span style="color: #97365B; font-weight: bold;">2</span>&gt;&amp;<span style="color: #97365B; font-weight: bold;">1</span>
</pre>
</div>
</div>
<div id="outline-container-orgbfbfd04" class="outline-4">
<h4 id="orgbfbfd04"><span class="section-number-4">4.12.1</span> References</h4>
<div class="outline-text-4" id="text-4-12-1">
<p>
<a href="https://github.com/microsoft/WSL/issues/5065">https://github.com/microsoft/WSL/issues/5065</a>
<a href="https://docs.microsoft.com/en-us/windows/wsl/interop">https://docs.microsoft.com/en-us/windows/wsl/interop</a>
</p>
</div>
</div>
</div>


<div id="outline-container-orge3e8427" class="outline-3">
<h3 id="orge3e8427"><span class="section-number-3">4.13</span> An .zshrc example</h3>
<div class="outline-text-3" id="text-4-13">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">If you come from bash you might have to change your $PATH.</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">export PATH=$HOME/bin:/usr/local/bin:$PATH</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Path to your oh-my-zsh installation.</span>
<span style="color: #29838D;">export</span> <span style="color: #842879;">ZSH</span>=<span style="color: #4F894C;">"/home/damonchan/.oh-my-zsh"</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Set name of the theme to load --- if set to "random", it will</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">load a random theme each time oh-my-zsh is loaded, in which case,</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">to know which specific one was loaded, run: </span><span style="color: #8b94a5;">echo</span><span style="color: #8b94a5;"> $RANDOM_THEME</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">See https://github.com/ohmyzsh/ohmyzsh/wiki/Themes</span>
<span style="color: #842879;">ZSH_THEME</span>=<span style="color: #4F894C;">"robbyrussell"</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Set list of themes to pick from when loading at random</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Setting this variable when ZSH_THEME=random will cause zsh to load</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">a theme from this variable instead of looking in $ZSH/themes/</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">If set to an empty array, this variable will have no effect.</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">ZSH_THEME_RANDOM_CANDIDATES=( "robbyrussell" "agnoster" )</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Uncomment the following line to use case-sensitive completion.</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">CASE_SENSITIVE="true"</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Uncomment the following line to use hyphen-insensitive completion.</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Case-sensitive completion must be off. _ and - will be interchangeable.</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">HYPHEN_INSENSITIVE="true"</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Uncomment the following line to disable bi-weekly auto-update checks.</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">DISABLE_AUTO_UPDATE="true"</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Uncomment the following line to automatically update without prompting.</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">DISABLE_UPDATE_PROMPT="true"</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Uncomment the following line to change how often to auto-update (in days).</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">export UPDATE_ZSH_DAYS=13</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Uncomment the following line if pasting URLs and other text is messed up.</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">DISABLE_MAGIC_FUNCTIONS="true"</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Uncomment the following line to disable colors in ls.</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">DISABLE_LS_COLORS="true"</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Uncomment the following line to disable auto-setting terminal title.</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">DISABLE_AUTO_TITLE="true"</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Uncomment the following line to enable command auto-correction.</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">ENABLE_CORRECTION="true"</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Uncomment the following line to display red dots whilst waiting for completion.</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">COMPLETION_WAITING_DOTS="true"</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Uncomment the following line if you want to disable marking untracked files</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">under VCS as dirty. This makes repository status check for large repositories</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">much, much faster.</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">DISABLE_UNTRACKED_FILES_DIRTY="true"</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Uncomment the following line if you want to change the command execution time</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">stamp shown in the history command output.</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">You can set one of the optional three formats:</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">"mm/dd/yyyy"|"dd.mm.yyyy"|"yyyy-mm-dd"</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">or set a custom format using the strftime function format specifications,</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">see 'man strftime' for details.</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">HIST_STAMPS="mm/dd/yyyy"</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Would you like to use another custom folder than $ZSH/custom?</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">ZSH_CUSTOM=/path/to/new-custom-folder</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Which plugins would you like to load?</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Standard plugins can be found in $ZSH/plugins/</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Custom plugins may be added to $ZSH_CUSTOM/plugins/</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Example format: plugins=(rails </span><span style="color: #8b94a5;">git</span><span style="color: #8b94a5;"> textmate ruby lighthouse)</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Add wisely, as too many plugins slow down shell startup.</span>
<span style="color: #842879;">plugins</span>=<span style="color: #3B6EA8;">(</span><span style="color: #9A7500;">git</span><span style="color: #3B6EA8;">)</span>

<span style="color: #29838D;">source</span> $<span style="color: #842879;">ZSH</span>/oh-my-zsh.sh

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">User configuration</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">export MANPATH="/usr/local/man:$MANPATH"</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">You may need to manually set your language environment</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">export LANG=en_US.UTF-8</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Preferred editor for local and remote sessions</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">if [[ -n $SSH_CONNECTION ]]; then</span>
<span style="color: #8b94a5;">#   </span><span style="color: #8b94a5;">export EDITOR='vim'</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">else</span>
<span style="color: #8b94a5;">#   </span><span style="color: #8b94a5;">export EDITOR='mvim'</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">fi</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Compilation flags</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">export ARCHFLAGS="-arch x86_64"</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Set personal aliases, overriding those provided by oh-my-zsh libs,</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">plugins, and themes. Aliases can be placed here, though oh-my-zsh</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">users are encouraged to define aliases within the ZSH_CUSTOM folder.</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">For a full list of active aliases, run `alias`.</span>
<span style="color: #8b94a5;">#</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">Example aliases</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">alias zshconfig="mate ~/.zshrc"</span>
<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">alias ohmyzsh="mate ~/.oh-my-zsh"</span>

<span style="color: #8b94a5;">#</span><span style="color: #8b94a5;">export DISPLAY=:0</span>
<span style="color: #29838D;">export</span> <span style="color: #842879;">DISPLAY</span>=$<span style="color: #3B6EA8;">(</span>ip route | awk <span style="color: #4F894C;">'{print $3; exit}'</span><span style="color: #3B6EA8;">)</span>:0
<span style="color: #29838D;">export</span> <span style="color: #842879;">LIBGL_ALWAYS_INDIRECT</span>=<span style="color: #97365B; font-weight: bold;">1</span>

<span style="color: #29838D;">export</span> <span style="color: #842879;">PYENV_ROOT</span>=<span style="color: #4F894C;">"</span><span style="color: #97365B;">$</span><span style="color: #842879;">HOME</span><span style="color: #4F894C;">/.pyenv"</span>
<span style="color: #29838D;">export</span> <span style="color: #842879;">PATH</span>=<span style="color: #4F894C;">"</span><span style="color: #97365B;">$</span><span style="color: #842879;">PYENV_ROOT</span><span style="color: #4F894C;">/bin:</span><span style="color: #97365B;">$</span><span style="color: #842879;">PATH</span><span style="color: #4F894C;">"</span>
<span style="color: #3B6EA8;">if</span> command -v pyenv <span style="color: #97365B; font-weight: bold;">1</span>&gt;/dev/null <span style="color: #97365B; font-weight: bold;">2</span>&gt;&amp;<span style="color: #97365B; font-weight: bold;">1</span>; <span style="color: #3B6EA8;">then</span>
  <span style="color: #29838D;">eval</span> <span style="color: #4F894C;">"</span><span style="color: #3B6EA8; font-weight: bold;">$(pyenv init -)</span><span style="color: #4F894C;">"</span>
<span style="color: #3B6EA8;">fi</span>

<span style="color: #29838D;">alias</span> <span style="color: #842879;">em</span>=<span style="color: #4F894C;">"emacsclient -nw"</span>

<span style="color: #8b94a5;">#</span><span style="color: #8b94a5;">export NVM_DIR="$HOME/.nvm"</span>
<span style="color: #8b94a5;">#</span><span style="color: #8b94a5;">[ -s "$NVM_DIR/nvm.sh" ] &amp;&amp; \. "$NVM_DIR/nvm.sh"  # This loads nvm</span>
<span style="color: #8b94a5;">#</span><span style="color: #8b94a5;">[ -s "$NVM_DIR/bash_completion" ] &amp;&amp; \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion</span>
<span style="color: #29838D;">export</span> <span style="color: #842879;">GDK_SCALE</span>=<span style="color: #97365B; font-weight: bold;">2</span>

<span style="color: #8b94a5;"># </span><span style="color: #8b94a5;">fix interop</span>
<span style="color: #29838D;">fix_wsl2_interop</span><span style="color: #3B6EA8;">()</span> <span style="color: #3B6EA8;">{</span>
    <span style="color: #3B6EA8;">for</span> i<span style="color: #3B6EA8;"> in</span> $<span style="color: #97365B;">(</span>pstree -np -s $<span style="color: #842879;">$</span> | <span style="color: #9A7500;">grep</span> -o -E <span style="color: #4F894C;">'[0-9]+'</span><span style="color: #97365B;">)</span>; <span style="color: #3B6EA8;">do</span>
        <span style="color: #3B6EA8;">if</span> <span style="color: #97365B;">[</span><span style="color: #4F894C;">[</span> -e <span style="color: #4F894C;">"/run/WSL/</span><span style="color: #97365B;">$</span><span style="color: #842879;">{i}</span><span style="color: #4F894C;">_interop"</span> <span style="color: #4F894C;">]</span><span style="color: #97365B;">]</span>; <span style="color: #3B6EA8;">then</span>
            <span style="color: #29838D;">export</span> <span style="color: #842879;">WSL_INTEROP</span>=/run/WSL/$<span style="color: #97365B;">{</span><span style="color: #842879;">i</span><span style="color: #97365B;">}</span>_interop
        <span style="color: #3B6EA8;">fi</span>
    <span style="color: #3B6EA8;">done</span>
<span style="color: #3B6EA8;">}</span>

~/.emacs.d/bin/doom env &gt; /dev/null <span style="color: #97365B; font-weight: bold;">2</span>&gt;&amp;<span style="color: #97365B; font-weight: bold;">1</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org9ec2ab8" class="outline-3">
<h3 id="org9ec2ab8"><span class="section-number-3">4.14</span> Export WSL (Backup)</h3>
<div class="outline-text-3" id="text-4-14">
<div class="org-src-container">
<pre class="src src-sh">wsl --export Ubuntu-18.04 Ubuntu-18.04_20200905 <span style="color: #3B6EA8;">(</span>Happy birthday :<span style="color: #3B6EA8;">)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org6e40099" class="outline-3">
<h3 id="org6e40099"><span class="section-number-3">4.15</span> <span class="todo TODO">TODO</span> ICONS in terminal</h3>
</div>
</div>

<div id="outline-container-orgb1971d1" class="outline-2">
<h2 id="orgb1971d1"><span class="section-number-2">5</span> Msys2</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgf254fcf" class="outline-3">
<h3 id="orgf254fcf"><span class="section-number-3">5.1</span> pacman</h3>
<div class="outline-text-3" id="text-5-1">
<div class="org-src-container">
<pre class="src src-sh">pacman -S <span style="color: #9A7500;">git</span>
pacman -S mingw-w64-x86_64-emacs
<span style="color: #9A7500;">git</span> submodule update --init --recursive
pacman -Syu
pacman -S mingw-w64-x86_64-gcc
pacman -S mingw-w64-x86_64-sqlite3
pacman -S unzip <span style="color: #3B6EA8;">(</span><span style="color: #3B6EA8;">for</span> nov.el<span style="color: #3B6EA8;">)</span>
pacman -Syu
pacman -Sy
pacman -Sy<span style="color: #4F894C;">\</span>
    --needed <span style="color: #4F894C;">\</span>
    filesystem <span style="color: #4F894C;">\</span>
    msys2-runtime <span style="color: #4F894C;">\</span>
    bash <span style="color: #4F894C;">\</span>
    libreadline <span style="color: #4F894C;">\</span>
    libiconv <span style="color: #4F894C;">\</span>
    libarchive <span style="color: #4F894C;">\</span>
    libgpgme <span style="color: #4F894C;">\</span>
    libcurl <span style="color: #4F894C;">\</span>
    pacman <span style="color: #4F894C;">\</span>
    ncurses <span style="color: #4F894C;">\</span>
    libintl
pacman -Su
pacman -S <span style="color: #4F894C;">\</span>
      autoconf <span style="color: #4F894C;">\</span>
      autogen <span style="color: #4F894C;">\</span>
      automake <span style="color: #4F894C;">\</span>
      automake-wrapper <span style="color: #4F894C;">\</span>
      diffutils <span style="color: #4F894C;">\</span>
      <span style="color: #9A7500;">git</span> <span style="color: #4F894C;">\</span>
      guile <span style="color: #4F894C;">\</span>
      libgc <span style="color: #4F894C;">\</span>
      libguile <span style="color: #4F894C;">\</span>
      libltdl <span style="color: #4F894C;">\</span>
      libunistring <span style="color: #4F894C;">\</span>
      <span style="color: #9A7500;">make</span> <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-binutils <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-bzip2 <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-cairo <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-cloog <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-crt-git <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-dbus <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-expat <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-fontconfig <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-freetype <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-gcc <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-gcc-libs <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-gdk-pixbuf2 <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-gettext <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-giflib <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-glib2 <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-gmp <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-gnutls <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-harfbuzz <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-headers-git <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-imagemagick <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-isl <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-libcroco <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-libffi <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-libiconv <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-libjpeg-turbo <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-libpng <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-librsvg <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-libtiff <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-libwinpthread-git <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-libxml2 <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-mpc <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-mpfr <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-pango <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-pixman <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-winpthreads <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-xpm-nox <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-xz <span style="color: #4F894C;">\</span>
      mingw-w64-x86_64-zlib <span style="color: #4F894C;">\</span>
      tar <span style="color: #4F894C;">\</span>
      wget

pacman -S mingw-w64-x86_64-aspell
pacman -S mingw-w64-x86_64-aspell-en

</pre>
</div>
</div>
</div>

<div id="outline-container-org5eb6ba4" class="outline-3">
<h3 id="org5eb6ba4"><span class="section-number-3">5.2</span> choco</h3>
<div class="outline-text-3" id="text-5-2">
<div class="org-src-container">
<pre class="src src-sh">Set-ExecutionPolicy Bypass -Scope Process -Force; <span style="color: #3B6EA8;">[</span>System.Net.ServicePointManager<span style="color: #3B6EA8;">]</span>::<span style="color: #842879;">SecurityProtocol</span> = <span style="color: #3B6EA8;">[</span>System.Net.ServicePointManager<span style="color: #3B6EA8;">]</span>::SecurityProtocol -bor <span style="color: #97365B; font-weight: bold;">3072</span>; iex <span style="color: #3B6EA8;">(</span><span style="color: #97365B;">(</span>New-Object System.Net.WebClient<span style="color: #97365B;">)</span>.DownloadString<span style="color: #97365B;">(</span><span style="color: #4F894C;">'https://chocolatey.org/install.ps1'</span><span style="color: #97365B;">)</span><span style="color: #3B6EA8;">)</span>
choco install ripgrep fd calibre
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd4aef14" class="outline-3">
<h3 id="orgd4aef14"><span class="section-number-3">5.3</span> Rime</h3>
<div class="outline-text-3" id="text-5-3">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #9A7500;">cd</span> ~/AppData/Roaming
<span style="color: #9A7500;">git</span> clone <span style="color: #9A7500;">git</span>@github.com:chenyanming/rime-config.git Rime
<span style="color: #9A7500;">mkdir</span> /mingw64/share/rime-data/opencc
<span style="color: #9A7500;">ln</span> -s /mingw64/share/opencc/* /mingw64/share/rime-data/opencc
M-x rime-compile-module
</pre>
</div>
</div>
</div>

<div id="outline-container-org2e9b473" class="outline-3">
<h3 id="org2e9b473"><span class="section-number-3">5.4</span> emacs</h3>
<div class="outline-text-3" id="text-5-4">
<p>
open a pdf and compile pdf tools
</p>

<p>
ssh-keygen -o -t rsa -C &ldquo;elecming@gmail.com&rdquo;<sup>C</sup>
git clone git@github.com:chenyanming/doom<sub>mac.git</sub> .doom.d
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2020-09-05 Sat 15:58</p>
</div>
</body>
</html>
